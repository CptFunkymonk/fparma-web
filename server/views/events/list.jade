extends ../layout

mixin mkevent(evt)
  .item
    .content
      a.header(href='/events/event/' + evt.permalink) #{evt.type.toUpperCase()} - #{evt.name}
      p by: #{evt.authors}
      span.js-event-date(data-date=evt.date, data-def=evt.display_date)=evt.display_date

block content
  .ui.container.segment
    h1.ui.dividing.header Events
      if (locals.user.admin)
        a.ui.primary.button.float-r(href='/events/create') Create new event
    
    if (events.upcoming.length || events.completed.length)
      .full-w.mt-top1
        p
          b Show dates as
        select#js-date-select.ui.drop.dropdown
          option(value='utc' selected='') UTC
          option(value='local') Local
          option(value='from_now') From now
    if events.upcoming.length
      h2.ui.dividing.header Upcoming events
      each event in events.upcoming
        .ui.relaxed.divided.list.segment.small
          +mkevent(event)
    else
      h2.ui.dividing.header No upcoming events
    
    if events.completed.length
      h2.ui.dividing.header.mt-top2 Previous events
      each event in events.completed
        .ui.relaxed.divided.list.segment.small
          +mkevent(event)
          
block tail
  +script_link('/vendor/moment.min.js', true)
